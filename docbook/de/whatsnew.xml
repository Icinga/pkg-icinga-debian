<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!ENTITY % all.entities SYSTEM "all-entities.ent">
%all.entities;
]>
<section version="5.0" xml:id="whatsnew" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:svg="http://www.w3.org/2000/svg" xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml" xmlns:db="http://docbook.org/ns/docbook">
  <title>What's New in &name-icinga; &ver-icinga;</title>

  <para>As usual this is only a brief overview. Please take a look at the Changelog as well if you are missing something.</para>

  <para><emphasis role="bold">Core</emphasis></para>

  <itemizedlist>

    <listitem>
      <para>fix duplicated events on check scheduling logic for new events (Andreas Ericsson) #2676 #2993</para>
    </listitem>

    <listitem>
      <para>avoid duplicate events when scheduling forced host|service check (Imri Zvik) #2993</para>
    </listitem>

    <listitem>
      <para>get rid of the instame macro usage while logging alerts and states (Andreas Ericsson) #2665</para>
    </listitem>

    <listitem>
      <para>revamp the detection of embedded perl usage directive "# icinga: +epn" (Andreas Ericsson) #2197</para>
    </listitem>

    <listitem>
      <para>fix whitespaces are not stripped using multiple templates ("use abc, def, ghi") #2701</para>
    </listitem>

    <listitem>
      <para>add hint on icinga.cfg package location, and tip to read Changelog CHANGES on upgrades #2879</para>
    </listitem>

    <listitem>
      <para>bail out early with config error if resource.cfg macros contain NULL values #2879</para>
    </listitem>

    <listitem>
      <para>fix logical bug on icinga.cfg detection on config read #2879</para>
    </listitem>

    <listitem>
      <para>fsync() files before fclose() (Andreas Ericsson) #2948</para>
    </listitem>

    <listitem>
      <para>remove weird switch() statement when scanning checkresult queue (Andreas Ericsson) #2950</para>
    </listitem>

    <listitem>
      <para>fix deleting too old check result files (Andreas Ericsson) #2951</para>
    </listitem>

    <listitem>
      <para>icinga.spec: forced update on icinga.cfg change package locations #2923</para>
    </listitem>

    <listitem>
      <para>icinga.spec: fix permissions on ido2db.cfg potentially world readable (Aaron Russo) #2897</para>
    </listitem>

  </itemizedlist>

  <para><emphasis role="bold">IDOUtils</emphasis></para>

  <itemizedlist>

    <listitem>
      <para>fix icinga mysql db creation script grants access to all dbs #2917</para>
    </listitem>

    <listitem>
      <para>fix ignoring mysql password in create_mysqldb.sh #2994</para>
    </listitem>
  </itemizedlist>

  <para><emphasis role="bold">1.7.1</emphasis></para>

  <para><emphasis role="bold">Core</emphasis></para>

  <itemizedlist>

    <listitem>
      <para>use prefix in solaris service definition #2609</para>
    </listitem>

    <listitem>
      <para>fix various memory leaks in downtime eventhandling on SIGHUP (Carlos Velasco) #2666</para>
    </listitem>

    <listitem>
      <para>check_ido2db_procs.cfg should not depend on local-service template #2616</para>
    </listitem>

    <listitem>
      <para>adapt lsb headers for icinga and ido2db #2637</para>
    </listitem>

    <listitem>
      <para>fix typo in contrib/eventhandlers/redundancy-scenario1/handle-master-proc-event (thanks uosiu) #2671</para>
    </listitem>

  </itemizedlist>

  <para><emphasis role="bold">Classic UI</emphasis></para>

  <itemizedlist>

    <listitem>
      <para>Fixed status.cgi time out when displaying hostgroups in large environments #2617</para>
    </listitem>

    <listitem>
      <para>Fixed Invalid JSON output for hostgroup overview (Torsten Rehn) #2680</para>
    </listitem>

    <listitem>
      <para>Fixed Confusing use of display_name in JSON and CSV output (Torsten Rehn) #2681</para>
    </listitem>

    <listitem>
      <para>Fixed wrong totals in "Service Status Summary" on Status Summary page (Mark Ziesemer) #2689</para>
    </listitem>

  </itemizedlist>

  <para><emphasis role="bold">IDOUtils</emphasis></para>

  <itemizedlist>

    <listitem>
      <para>fix small compiler issues #2620</para>
    </listitem>

    <listitem>
      <para>fix upgradedb script typos and past changes #2682</para>
    </listitem>
  </itemizedlist>

  <para><emphasis role="bold">1.7.0</emphasis></para>

  <para><emphasis role="bold">CHANGES</emphasis></para>

  <itemizedlist>
    <listitem>
      <para><emphasis condition="red" role="color">move bindir/idomod.o to libdir/idomod.so - make sure to update your configs after
      upgrade!</emphasis></para>
    </listitem>

    <listitem>
      <para>move from /var/icinga to /var/spool/icinga in icinga.spec (upgrade safe)</para>
    </listitem>

    <listitem>
      <para>rename icinga-idoutils rpm to icinga-idoutils-libdbi-mysql|pgsql in icinga.spec</para>
    </listitem>

    <listitem>
      <para>--enable-libtap is deprecated, make test now works out-of-the-box with rewritten tests core</para>
    </listitem>
  </itemizedlist>

  <para><emphasis role="bold">Core</emphasis></para>

  <itemizedlist>
    <listitem>
      <para>avoid insane looping through event list when rescheduling checks (Mathias Kettner, Andreas Ericsson) #2182</para>
    </listitem>

    <listitem>
      <para>add a lot of configure params to allow easier packaging (see CHANGES)</para>
    </listitem>

    <listitem>
      <para>introduce lib/ for modules with new .so extension</para>
    </listitem>

    <listitem>
      <para>add nebmodule version/name check for idomod (this allows future version dependencies) #2569</para>
    </listitem>

    <listitem>
      <para>add trigger_time to downtimes to allow calculating of flexible downtimes endtime #2537</para>
    </listitem>

    <listitem>
      <para>* fix scheduled_downtime_depth falsely incremented if in flexible downtime with duration &lt; end-starttime window #2536</para>
    </listitem>
  </itemizedlist>

  <para><emphasis role="bold">Classic UI </emphasis></para>

  <itemizedlist>
    <listitem>
      <para>add option for max log entries displayed in showlog.cgi #2145</para>
    </listitem>
  </itemizedlist>

  <itemizedlist>
    <listitem>
      <para>add statusmap resizing with exclude/include button (thanks to Mat) #2186</para>
    </listitem>

    <listitem>
      <para>add javascript to refresh page/pause easier #2119</para>
    </listitem>

    <listitem>
      <para>add display_status_totals as cgi.cfg option in order to allow the status totals to be shown again #2443</para>
    </listitem>

    <listitem>
      <para>add readonly cgi.cfg view into the config section #1776</para>
    </listitem>

    <listitem>
      <para>add is_in_effect and trigger_time to downtime view for html, csv, json #2538</para>
    </listitem>

    <listitem>
      <para>add modified attributes view and reset cmd #2473 #2474</para>
    </listitem>

    <listitem>
      <para>fix status totals are wrong when searching #1524</para>
    </listitem>

    <listitem>
      <para>fix reset forms on return after submitting command #2117</para>
    </listitem>
  </itemizedlist>

  <para><emphasis role="bold">IDOutils</emphasis></para>

  <itemizedlist>
    <listitem>
      <para>change varchar(255) to TEXT in mysql (not cs and address rfc columns) #2181</para>
    </listitem>

    <listitem>
      <para>set module info in idomod, to be checked on neb module load in future versions #2569</para>
    </listitem>

    <listitem>
      <para>change standard string escaping for postgresql queries to use the E'foo' notation #1974</para>
    </listitem>

    <listitem>
      <para>fix lob handling in Oracle #2303,#2342</para>
    </listitem>

    <listitem>
      <para>fix OCI-21500 when freeing lobs #2509</para>
    </listitem>

    <listitem>
      <para>fix pgsql unix_timestamp cannot handle timstamp with timezone #2203</para>
    </listitem>
  </itemizedlist>

  <para><emphasis role="bold">Icinga-Web</emphasis></para>

  <itemizedlist>
    <listitem>
      <para>add DQL-views as backend for templates. This means that you can create your XML views based on doctrine query language. It's
      more flexible to adopt database changes or to connect other systems to your grids like trouble ticket or issue based systems</para>
    </listitem>

    <listitem>
      <para>enable "save" and "save as" for custom cronks. This allows you to modify your views without hacking data</para>
    </listitem>

    <listitem>
      <para>adjust GUI calculations to be more like in the classic UI. Many calculations had different algorithms compared to the classic
      user interface which was confusing for the users</para>
    </listitem>

    <listitem>
      <para>many fixes for views (grids and tactical overviews) to work more smoothly</para>
    </listitem>

    <listitem>
      <para>RDBMS fixes for getting data, fixed problems for Oracle and Postgres</para>
    </listitem>
  </itemizedlist>

  <para><emphasis role="bold">Docs</emphasis></para>

  <itemizedlist>
    <listitem>
      <para>Hints how to use recurring downtimes #1867</para>
    </listitem>
  </itemizedlist>

  <para><link xlink:href="https://wiki.icinga.org/display/Dev/Releases">More at Icinga Wiki</link></para>

  <para>Should you find any issues, please report them to one of the following links:</para>

  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-core">Report Issue &name-core;</link></para>

  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-web">Report Issue &name-web;</link></para>

  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-api">Report Issue &name-api;</link></para>

  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-reporting">Report Issue &name-rep;</link></para>

  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-docs">Report Issue &name-docs;</link></para>

  <indexterm zone="whatsnew">
    <primary>What's new in &name-icinga;</primary>
  </indexterm>
</section>
