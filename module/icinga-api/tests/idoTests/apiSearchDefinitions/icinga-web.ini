;
;	Test definitions for icinga web
;	If you encounter any problems with the icinga-api,
;	create a unit test to debug it.
;

; This one comes with nearer explanation
[Host History]

;From where to fetch the data. Must be an icingaApi constant
target 		= "IcingaApi::TARGET_HOST_STATUS_HISTORY"

;Which columns to use for the request. 
;These often are inner joins, so if there's no data in the cols, there won't be a result
columns[] 	= "INSTANCE_NAME"
columns[] 	= "STATEHISTORY_ID"
columns[] 	= "HOST_OBJECT_ID"
columns[] 	= "HOST_NAME"
columns[] 	= "STATEHISTORY_STATE"
columns[] 	= "STATEHISTORY_STATE_TIME"
columns[] 	= "STATEHISTORY_CURRENT_CHECK_ATTEMPT"
columns[] 	= "STATEHISTORY_OUTPUT"
columns[] 	= "STATEHISTORY_MAX_CHECK_ATTEMPTS"

; Limit ALWAYS needs an offset and a top limit
limit[]		=  0
limit[]		=  20

; You can enter multiple sort fields, but they must be in the format "%FIELD%,$DIRECTION"
sort[] 		= "STATEHISTORY_ID,ASC"

; Groups is sometimes specified. 
; Beware that on oracle the api always adds a group by for queries including arithmetic operations  
;groups[] 	= null

; When in strict mode, the results of ref_db and target_db will be compared and the test fails on the smallest
; difference. This also includes sorting, which can be a little bit problematic if you have similar items 
; where you can't tell which item comes first. So  unly use with sorting on unique keys.
;
strict		= true
	
	
[Host]
target 		= "IcingaApi::TARGET_HOST"
columns[]	= "INSTANCE_NAME"
columns[]	= "HOST_OBJECT_ID"
columns[]	= "HOST_NAME"
columns[]	= "HOST_CURRENT_STATE"
columns[]	= "HOST_LAST_CHECK"
columns[]	= "HOST_CURRENT_CHECK_ATTEMPT"
columns[]	= "HOST_OUTPUT"
columns[]	= "HOST_MAX_CHECK_ATTEMPTS"
columns[]	= "HOST_IS_PENDING"
limit[]	 	= 0
limit[]		= 75
sort[] 		= "HOST_NAME,ASC"
sort[]		= "HOST_LAST_CHECK,DESC"

[Hostgroup]
target		= "IcingaApi::TARGET_HOSTGROUP_SUMMARY"	
columns[]	= "HOSTGROUP_ID"
columns[]	= "HOSTGROUP_NAME"
columns[]	= "HOSTGROUP_ALIAS"
columns[]	= "HOST_CURRENT_STATE"
columns[]	= "HOSTGROUP_SUMMARY_COUNT"
sort[] 		= "HOSTGROUP_NAME,ASC"
sort[] 		= "HOST_CURRENT_STATE,ASC"
groups[]	= "HOSTGROUP_ID"
groups[]	= "HOSTGROUP_NAME"
groups[]	= "HOSTGROUP_ALIAS"
groups[]	= "HOST_CURRENT_STATE"

[Log]
target		= "IcingaApi::TARGET_LOG"
columns[]	= "LOG_ID"
columns[]	= "LOG_TIME"
columns[]	= "LOG_TYPE"
columns[]	= "LOG_DATA"
limit[]		= 0
limit[]		= 75

[Notification]
target		= "IcingaApi::TARGET_NOTIFICATIONS"
columns[]	= "NOTIFICATION_ID"
columns[]	= "NOTIFICATION_TYPE"
columns[]	= "HOST_NAME"
columns[]	= "SERVICE_NAME"
columns[]	= "NOTIFICATION_STATE"
columns[]	= "NOTIFICATION_STARTTIME"
columns[]	= "NOTIFICATION_OUTPUT"
limit[]		= 0
limit[]		= 75
sort[]		= "NOTIFICATION_STARTTIME,DESC"

[Service History]
target		= "IcingaApi::TARGET_SERVICE_STATUS_HISTORY"
columns[]	= "INSTANCE_NAME"
columns[]	= "STATEHISTORY_ID"
columns[]	= "HOST_OBJECT_ID"
columns[]	= "HOST_NAME"
columns[]	= "SERVICE_OBJECT_ID"
columns[]	= "SERVICE_NAME"
columns[]	= "STATEHISTORY_STATE"
columns[]	= "STATEHISTORY_STATE_TIME"
columns[]	= "STATEHISTORY_CURRENT_CHECK_ATTEMPT"
columns[]	= "STATEHISTORY_OUTPUT"
columns[]	= "STATEHISTORY_MAX_CHECK_ATTEMPTS"		
limit[]		= 0
limit[]		= 75
sort[]		= "SERVICE_OBJECT_ID,DESC",
sort[]		= "STATEHISTORY_STATE_TIME,DESC"

[Service]
target		= "IcingaApi::TARGET_SERVICE"
columns[]	= "INSTANCE_NAME"
columns[]	= "HOST_OBJECT_ID"
columns[]	= "SERVICE_OBJECT_ID"
columns[]	= "HOST_NAME"
columns[]	= "SERVICE_NAME"
columns[]	= "SERVICE_CURRENT_STATE"
columns[]	= "SERVICE_LAST_CHECK"
columns[]	= "SERVICE_MAX_CHECK_ATTEMPTS"
columns[]	= "SERVICE_CURRENT_CHECK_ATTEMPT"
columns[]	= "SERVICE_OUTPUT"
columns[]	= "SERVICE_IS_PENDING"
limit[]		= 0
limit[]		= 75
sort[]		= "HOST_OBJECT_ID,ASC"
sort[]		= "SERVICE_OBJECT_ID,ASC"

[Servicegroup Summary]
target		= "IcingaApi::TARGET_SERVICEGROUP_SUMMARY"
columns[]	= "SERVICEGROUP_ID"
columns[]	= "SERVICEGROUP_NAME"
columns[]	= "SERVICEGROUP_ALIAS"
columns[]	= "SERVICE_CURRENT_STATE"
columns[]	= "SERVICEGROUP_SUMMARY_COUNT"
groups[]	= "SERVICEGROUP_ID"
groups[]	= "SERVICEGROUP_NAME"
groups[]	= "SERVICEGROUP_ALIAS"
groups[]	= "SERVICE_CURRENT_STATE"

[LOG Count]
target 		= "IcingaApi::TARGET_LOG"
columns[]	= "LOG_ID"
sort[]		= "LOG_ENTRY_TIME,DESC"
type		= "IcingaApi::SEARCH_TYPE_COUNT"

[Open Problems ]
target		= "IcingaApi::TARGET_HOST_SERVICE"
columns[]	= "SERVICE_NAME"
columns[]	= "HOST_NAME"
columns[]	= "SERVICE_CURRENT_STATE"
columns[]	= "HOST_CURRENT_STATE"
columns[]	= "SERVICE_IS_PENDING"
columns[]	= "HOST_IS_PENDING"
